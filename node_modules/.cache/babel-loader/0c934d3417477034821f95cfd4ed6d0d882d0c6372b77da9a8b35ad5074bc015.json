{"ast":null,"code":"import React,{useState}from\"react\";import LibreriaMaterialList from\"../components/LibreriaMaterialList\";import LibreriaMaterialForm from\"../components/LibreriaMaterialForm\";import BuscarLibroPorId from\"../components/BuscarLibroPorId\";// <-- Importa el buscador\nimport{crearLibro,actualizarLibro}from\"../api/libreriaMaterialService\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LibreriaMaterialView(){const[modoEdicion,setModoEdicion]=useState(false);const[libroSeleccionado,setLibroSeleccionado]=useState(null);const[mensaje,setMensaje]=useState(null);const[error,setError]=useState(null);function handleEditar(libro){setLibroSeleccionado(libro);setModoEdicion(true);setMensaje(null);setError(null);}function handleCancelar(){setModoEdicion(false);setLibroSeleccionado(null);setMensaje(null);setError(null);}async function handleGuardar(libro){try{if(libro.libreriaMaterialId){// Actualizar\nawait actualizarLibro(libro.libreriaMaterialId,libro);setMensaje(\"Libro actualizado correctamente.\");}else{// Crear\nawait crearLibro(libro);setMensaje(\"Libro creado correctamente.\");}setModoEdicion(false);setLibroSeleccionado(null);}catch(e){setError(e.message);}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Gesti\\xF3n de Libros\"}),mensaje&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:mensaje}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),modoEdicion?/*#__PURE__*/_jsx(LibreriaMaterialForm,{libro:libroSeleccionado,onSave:handleGuardar,onCancel:handleCancelar}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setLibroSeleccionado(null);setModoEdicion(true);setMensaje(null);setError(null);},children:\"Agregar Nuevo Libro\"}),/*#__PURE__*/_jsx(BuscarLibroPorId,{}),/*#__PURE__*/_jsx(LibreriaMaterialList,{onEdit:handleEditar})]})]});}","map":{"version":3,"names":["React","useState","LibreriaMaterialList","LibreriaMaterialForm","BuscarLibroPorId","crearLibro","actualizarLibro","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LibreriaMaterialView","modoEdicion","setModoEdicion","libroSeleccionado","setLibroSeleccionado","mensaje","setMensaje","error","setError","handleEditar","libro","handleCancelar","handleGuardar","libreriaMaterialId","e","message","children","style","color","onSave","onCancel","onClick","onEdit"],"sources":["C:/libreria-frontend/src/views/LibreriaMaterialView.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport LibreriaMaterialList from \"../components/LibreriaMaterialList\";\r\nimport LibreriaMaterialForm from \"../components/LibreriaMaterialForm\";\r\nimport BuscarLibroPorId from \"../components/BuscarLibroPorId\"; // <-- Importa el buscador\r\nimport {\r\n  crearLibro,\r\n  actualizarLibro,\r\n} from \"../api/libreriaMaterialService\";\r\n\r\nexport default function LibreriaMaterialView() {\r\n  const [modoEdicion, setModoEdicion] = useState(false);\r\n  const [libroSeleccionado, setLibroSeleccionado] = useState(null);\r\n  const [mensaje, setMensaje] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  function handleEditar(libro) {\r\n    setLibroSeleccionado(libro);\r\n    setModoEdicion(true);\r\n    setMensaje(null);\r\n    setError(null);\r\n  }\r\n\r\n  function handleCancelar() {\r\n    setModoEdicion(false);\r\n    setLibroSeleccionado(null);\r\n    setMensaje(null);\r\n    setError(null);\r\n  }\r\n\r\n  async function handleGuardar(libro) {\r\n    try {\r\n      if (libro.libreriaMaterialId) {\r\n        // Actualizar\r\n        await actualizarLibro(libro.libreriaMaterialId, libro);\r\n        setMensaje(\"Libro actualizado correctamente.\");\r\n      } else {\r\n        // Crear\r\n        await crearLibro(libro);\r\n        setMensaje(\"Libro creado correctamente.\");\r\n      }\r\n      setModoEdicion(false);\r\n      setLibroSeleccionado(null);\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Gestión de Libros</h1>\r\n\r\n      {mensaje && <p style={{ color: \"green\" }}>{mensaje}</p>}\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n\r\n      {modoEdicion ? (\r\n        <LibreriaMaterialForm\r\n          libro={libroSeleccionado}\r\n          onSave={handleGuardar}\r\n          onCancel={handleCancelar}\r\n        />\r\n      ) : (\r\n        <>\r\n          <button\r\n            onClick={() => {\r\n              setLibroSeleccionado(null);\r\n              setModoEdicion(true);\r\n              setMensaje(null);\r\n              setError(null);\r\n            }}\r\n          >\r\n            Agregar Nuevo Libro\r\n          </button>\r\n\r\n          {/* Aquí insertamos el buscador */}\r\n          <BuscarLibroPorId />\r\n\r\n          <LibreriaMaterialList onEdit={handleEditar} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}