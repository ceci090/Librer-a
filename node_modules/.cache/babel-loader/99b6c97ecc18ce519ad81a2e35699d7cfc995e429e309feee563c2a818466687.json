{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{getLibros,eliminarLibro}from\"../api/libreriaMaterialService\";import\"../styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LibreriaMaterialList(_ref){let{onEdit,onDelete}=_ref;const[libros,setLibros]=useState([]);const[error,setError]=useState(null);useEffect(()=>{cargarLibros();},[]);async function cargarLibros(){try{const response=await getLibros();console.log(\"Respuesta API libros:\",response);// response es el array directamente, no response.data\nconst librosData=Array.isArray(response)?response:[];console.log(\"Libros a mostrar:\",librosData);setLibros(librosData);setError(null);}catch(e){console.error(\"Error al cargar libros:\",e);setError(e.message);setLibros([]);}}async function handleEliminar(id){if(!window.confirm(\"¿Seguro que quieres eliminar este libro?\"))return;try{await eliminarLibro(id);await cargarLibros();}catch(e){setError(e.message);}}if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error});if(!Array.isArray(libros)||libros.length===0)return/*#__PURE__*/_jsx(\"p\",{children:\"No hay libros para mostrar.\"});return/*#__PURE__*/_jsxs(\"table\",{className:\"tabla-libros\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Autor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha Publicaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:libros.map(libro=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:libro.titulo}),/*#__PURE__*/_jsx(\"td\",{children:libro.autorLibro}),/*#__PURE__*/_jsx(\"td\",{children:libro.fechaPublicacion?new Date(libro.fechaPublicacion).toLocaleDateString():\"\"}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-accion btn-editar\",onClick:()=>onEdit(libro),children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-accion btn-eliminar\",onClick:()=>handleEliminar(libro.libreriaMaterialId),children:\"Eliminar\"})]})]},libro.libreriaMaterialId))})]});}","map":{"version":3,"names":["React","useEffect","useState","getLibros","eliminarLibro","jsx","_jsx","jsxs","_jsxs","LibreriaMaterialList","_ref","onEdit","onDelete","libros","setLibros","error","setError","cargarLibros","response","console","log","librosData","Array","isArray","e","message","handleEliminar","id","window","confirm","style","color","children","length","className","map","libro","titulo","autorLibro","fechaPublicacion","Date","toLocaleDateString","onClick","libreriaMaterialId"],"sources":["C:/libreria-frontend/src/components/LibreriaMaterialList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getLibros, eliminarLibro } from \"../api/libreriaMaterialService\";\r\nimport \"../styles.css\";\r\n\r\nexport default function LibreriaMaterialList({ onEdit, onDelete }) {\r\n  const [libros, setLibros] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    cargarLibros();\r\n  }, []);\r\n\r\n  async function cargarLibros() {\r\n    try {\r\n      const response = await getLibros();\r\n      console.log(\"Respuesta API libros:\", response);\r\n\r\n      // response es el array directamente, no response.data\r\n      const librosData = Array.isArray(response) ? response : [];\r\n      console.log(\"Libros a mostrar:\", librosData);\r\n\r\n      setLibros(librosData);\r\n      setError(null);\r\n    } catch (e) {\r\n      console.error(\"Error al cargar libros:\", e);\r\n      setError(e.message);\r\n      setLibros([]);\r\n    }\r\n  }\r\n\r\n  async function handleEliminar(id) {\r\n    if (!window.confirm(\"¿Seguro que quieres eliminar este libro?\")) return;\r\n    try {\r\n      await eliminarLibro(id);\r\n      await cargarLibros();\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n  }\r\n\r\n  if (error) return <p style={{ color: \"red\" }}>{error}</p>;\r\n\r\n  if (!Array.isArray(libros) || libros.length === 0)\r\n    return <p>No hay libros para mostrar.</p>;\r\n\r\n  return (\r\n    <table className=\"tabla-libros\">\r\n      <thead>\r\n        <tr>\r\n          <th>Título</th>\r\n          <th>Autor</th>\r\n          <th>Fecha Publicación</th>\r\n          <th>Acciones</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {libros.map((libro) => (\r\n          <tr key={libro.libreriaMaterialId}>\r\n            <td>{libro.titulo}</td>\r\n            <td>{libro.autorLibro}</td>\r\n            <td>\r\n              {libro.fechaPublicacion\r\n                ? new Date(libro.fechaPublicacion).toLocaleDateString()\r\n                : \"\"}\r\n            </td>\r\n            <td>\r\n              <button\r\n                className=\"btn-accion btn-editar\"\r\n                onClick={() => onEdit(libro)}\r\n              >\r\n                Editar\r\n              </button>\r\n              <button\r\n                className=\"btn-accion btn-eliminar\"\r\n                onClick={() => handleEliminar(libro.libreriaMaterialId)}\r\n              >\r\n                Eliminar\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}